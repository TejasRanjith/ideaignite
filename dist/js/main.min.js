!function () {
    const e = document,
        t = e.documentElement,
        n = e.body,
        i = e.getElementById("lights-toggle"),
        s = window.sr = ScrollReveal();
    function a() {
        let e = i.parentNode.querySelector(".label-text");
        i.checked ? (n.classList.remove("lights-off"),
            e && (e.innerHTML = "dark")) : (n.classList.add("lights-off"),
                e && (e.innerHTML = "light"))
    }
    t.classList.remove("no-js"),
        t.classList.add("js"),
        window.addEventListener("load", function () { n.classList.add("is-loaded") }),
        n.classList.contains("has-animations") && window.addEventListener(
            "load", function () {
            s.reveal(".feature",
                {
                    duration: 600,
                    distance: "20px",
                    easing: "cubic-bezier(0.215, 0.61, 0.355, 1)",
                    origin: "right", viewFactor: .2
                }
            )
        }
        ),
        i && (window.addEventListener("load", a),
            i.addEventListener("change", a))
}();

const targetDate = new Date('September 28, 2024 23:59:59').getTime();

        
// Check if there's a saved countdown value in local storage
let countdownEndDate = targetDate;
const savedCountdown = localStorage.getItem('countdown');

if (savedCountdown) {
    // Use the saved countdown value from local storage
    const savedTimeRemaining = parseInt(savedCountdown, 10);
    const savedEndDate = new Date().getTime() + savedTimeRemaining; // Calculate the saved end date
    countdownEndDate = Math.min(savedEndDate, targetDate); // Set countdown end date to the earlier of the two
}

// Function to update the countdown every 1 second
const updateCountdown = setInterval(function() {
    const now = new Date().getTime(); // Get the current time
    const distance = countdownEndDate - now; // Find the distance between now and the countdown end date

    // Time calculations for days, hours, minutes, and seconds
    const days = Math.floor(distance / (1000 * 60 * 60 * 24));
    const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
    const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
    const seconds = Math.floor((distance % (1000 * 60)) / 1000);

    // Display the result in elements with id="days", "hours", "minutes", "seconds"
    document.getElementById("days").innerHTML = (days < 10 ? "0" : "") + days;
    document.getElementById("hours").innerHTML = (hours < 10 ? "0" : "") + hours;
    document.getElementById("minutes").innerHTML = (minutes < 10 ? "0" : "") + minutes;
    document.getElementById("seconds").innerHTML = (seconds < 10 ? "0" : "") + seconds;

    // Save the current time remaining to local storage
    localStorage.setItem('countdown', distance);

    // If the countdown is over, write some text
    if (distance < 0) {
        clearInterval(updateCountdown);
        document.getElementById("registerButton").innerHTML = '<i class="fas fa-ban"></i> Applications closed';
        document.getElementById("registerButton").classList.add('closed');
        document.getElementById("registerButton").removeAttribute('href');
        document.getElementById("days").innerHTML = "00";
        document.getElementById("hours").innerHTML = "00";
        document.getElementById("minutes").innerHTML = "00";
        document.getElementById("seconds").innerHTML = "00";
        localStorage.removeItem('countdown'); // Clear countdown from local storage
    } else {
        document.getElementById("registerButton").innerHTML = '<i class="fas fa-check"></i> Register Now';
        document.getElementById("registerButton").classList.remove('closed');
        document.getElementById("registerButton").setAttribute('href', '#');
    }
}, 1000);